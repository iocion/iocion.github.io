# 六位补码阵列乘法器课程设计摘要

## 项目概述

本项目设计并实现了一个基于FPGA的六位补码阵列乘法器，能够处理有符号数的乘法运算。该设计采用模块化架构，包含补码乘法器核心、无符号乘法器、数码管显示控制以及完整的测试验证系统。

## 设计目标

1. **功能目标**：实现6位有符号数（补码表示）的乘法运算
2. **性能目标**：支持-32到+31范围内的整数乘法，输出12位结果
3. **显示目标**：通过LED和数码管实时显示乘法结果
4. **验证目标**：建立完整的测试验证体系，确保设计正确性

## 技术方案

### 1. 核心算法设计

**补码乘法算法**：
- 采用"绝对值相乘+符号处理"的方法
- 将输入操作数转换为绝对值进行无符号乘法
- 根据两操作数符号位异或结果确定最终符号
- 特殊处理边界情况（如-32×-32=1024）

**无符号乘法实现**：
- 使用移位相加法实现乘法运算
- 生成6个部分积（对应乘数的每一位）
- 通过左移和累加完成乘法计算
- 最大支持31×31=961的乘法运算

### 2. 系统架构

**模块化设计**：
```
Board_6 (顶层模块)
├── multiply_6_twos_complement (补码乘法器)
│   └── multiply_6_unsigned (无符号乘法器)
└── Display_6 (显示控制模块)
```

**接口设计**：
- 输入：12个开关（6位操作数A + 6位操作数B）
- 输出：12个LED（直接显示结果）+ 8位数码管（格式化显示）
- 控制：时钟信号（100MHz）+ 复位信号

### 3. 关键技术特点

**补码处理机制**：
- 自动检测负数并转换为绝对值
- 符号位计算：`sign_bit = X[5] ^ Y[5]`
- 结果符号处理：负数取反加1，正数直接使用

**边界情况处理**：
- 特殊处理-32×-32=1024的情况
- 正确处理6位补码的数值范围（-32到+31）
- 输出12位结果以容纳最大乘积

**显示系统设计**：
- LED直接显示12位二进制结果
- 数码管动态扫描显示（8位×4段）
- 七段译码器支持0-F十六进制显示

## 实现细节

### 1. 补码乘法器核心（multiply_6_twos_complement.v）

```verilog
// 绝对值计算
wire [5:0] abs_X = X[5] ? (~X + 1'b1) : X;
wire [5:0] abs_Y = Y[5] ? (~Y + 1'b1) : Y;

// 符号位计算
wire sign_bit = X[5] ^ Y[5];

// 特殊边界处理
if (X == 6'b100000 && Y == 6'b100000) begin
    P = 12'b010000000000; // 1024
end
```

### 2. 无符号乘法器（multiply_6_unsigned.v）

```verilog
// 部分积生成
wire [5:0] pp0 = X & {6{Y[0]}};
wire [5:0] pp1 = X & {6{Y[1]}};
// ... 其他部分积

// 移位累加
wire [10:0] sum0 = {5'b0, pp0};
wire [10:0] sum1 = sum0 + ({4'b0, pp1, 1'b0});
// ... 累加过程
```

### 3. 显示控制模块（Display_6.v）

- 动态扫描机制：16位计数器控制位选
- 数据分解：32位数据分解为8个4位段
- 七段译码：支持0-F十六进制显示

## 测试验证

### 1. 测试策略

**功能测试**：
- 正数×正数、负数×正数、负数×负数
- 零值测试、边界值测试
- 特殊边界情况（-32×-32）

**覆盖测试**：
- 数值范围：-32到+31
- 符号组合：正正、正负、负正、负负
- 边界条件：最大值、最小值、零值

### 2. 测试用例

```verilog
test_case(6'd3, 6'd5, 12'd15);       // 正数×正数
test_case(-6'd3, 6'd5, -12'd15);     // 负数×正数
test_case(-6'd3, -6'd5, 12'd15);     // 负数×负数
test_case(-6'd32, -6'd32, 12'd1024); // 特殊边界
test_case(6'd31, 6'd31, 12'd961);    // 最大值测试
```

## 硬件实现

### 1. FPGA约束配置（Board_6.xdc）

- **时钟配置**：100MHz系统时钟，10ns周期
- **引脚分配**：12个输入开关、12个LED输出、8位数码管
- **电平标准**：LVCMOS18，支持上拉/下拉电阻配置

### 2. 资源利用

- **逻辑资源**：组合逻辑实现乘法运算
- **时序资源**：时钟域同步，复位机制
- **I/O资源**：24个输入输出引脚

## 设计优势

### 1. 算法优势

- **补码兼容性**：完全支持有符号数运算
- **边界处理**：正确处理6位补码的特殊情况
- **精度保证**：12位输出确保结果不溢出

### 2. 架构优势

- **模块化设计**：功能分离，易于维护和扩展
- **可重用性**：无符号乘法器可独立使用
- **测试完备性**：完整的验证体系

### 3. 实用性优势

- **实时显示**：LED和数码管双重显示
- **用户友好**：开关输入，直观操作
- **硬件验证**：FPGA实际运行验证

## 应用前景

### 1. 教学应用

- **数字逻辑教学**：补码运算原理演示
- **FPGA开发学习**：硬件描述语言实践
- **计算机组成原理**：乘法器设计案例

### 2. 工程应用

- **嵌入式系统**：小型乘法运算单元
- **信号处理**：定点数乘法运算
- **数字电路设计**：基础运算单元

## 总结

本设计成功实现了一个功能完整、性能可靠的六位补码阵列乘法器。通过模块化设计、完善的测试验证和实用的显示系统，不仅满足了课程设计的基本要求，还具备了良好的扩展性和实用性。该设计为理解补码运算原理、掌握FPGA开发技术提供了优秀的实践案例。

**关键词**：补码乘法器、阵列乘法、FPGA设计、Verilog、数字逻辑